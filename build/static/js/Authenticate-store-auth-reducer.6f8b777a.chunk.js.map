{"version":3,"sources":["Modules/Authenticate/store/auth/reducer.js","Modules/Authenticate/helpers/index.js"],"names":["initState","accessToken","userData","loading","loginSuccess","error","persistConfig","key","storage","blacklist","persistReducer","state","action","type","Actions","token","payload","logout","setToken","localStorage","setItem","setUserInfo","user","JSON","stringify","setImportStatus","importStatus","getUserInfo","parse","getItem","setPermissionsUserInfo","permissions","getPermissionsUserInfo","removeToken","removeItem","checkLoggedIn","undefined","setAccessToken"],"mappings":"0LAKMA,EAAY,CAChBC,YAAa,KACbC,SAAU,CAAC,EACXC,SAAS,EACTC,cAAc,EACdC,MAAO,IAoEHC,EAAgB,CACpBC,IAAK,OACLC,YACAC,UAAW,CAAC,UAAW,UAGVC,mCAAeJ,GAvEV,WAAqC,IAAD,EAAnCK,EAAK,uDAAGX,EAAWY,EAAM,uDAAG,CAAC,EAChD,OAAQA,EAAOC,MACb,KAAKC,sBACH,OAAO,2BAAKH,GAAK,IAAER,SAAS,IAC9B,KAAKW,kBACH,IAAMC,EAAsB,QAAjB,EAAGH,EAAOI,eAAO,aAAd,EAAgBD,MAC9B,GAAIA,EAAO,CACT,IAAMd,EAAW,iBAAac,GAC9B,OAAO,2BACFJ,GAAK,IACRR,SAAS,EACTE,MAAO,GACPD,cAAc,EACdH,cACAC,SAAS,eAAMU,EAAOI,UAE1B,CACA,OAAO,2BACFL,GAAK,IACRT,SAAS,eAAMU,EAAOI,WAG1B,KAAKF,gBACH,IAAQT,EAAUO,EAAVP,MACR,OAAO,2BACFM,GAAK,IACRR,SAAS,EACTE,QACAD,cAAc,EACdH,YAAa,KACbC,SAAU,CAAC,IAEf,KAAKY,6BAEH,OADAG,mBACO,2BACFN,GAAK,IACRR,SAAS,EACTE,MAAO,GACPD,cAAc,EACdH,YAAa,KACbC,SAAU,CAAC,IAEf,KAAKY,gBACH,OAAO,2BACFH,GAAK,IACRR,SAAS,EACTE,MAAO,KAEX,KAAKS,wBACH,OAAO,2BACFH,GAAK,IACRR,SAAS,EACTE,MAAO,GACPH,SAAS,2BACJS,EAAMT,UACNU,EAAOI,WAKhB,QACE,OAAOL,EAEb,G,2gBC5EaO,EAAW,SAACH,GACvBI,aAAaC,QAAQ,QAASL,EAChC,EAEaM,EAAc,SAACC,GAC1BH,aAAaC,QAAQ,YAAaG,KAAKC,UAAUF,GACnD,EAEaG,EAAkB,SAACC,GAC9BP,aAAaC,QAAQ,gBAAiBM,EACxC,EAEaC,EAAc,SAACL,GAC1B,OAAOC,KAAKK,MAAMT,aAAaU,QAAQ,aACzC,EAEaC,EAAyB,SAACC,GACrCZ,aAAaC,QAAQ,cAAeG,KAAKC,UAAUO,GACrD,EAEaC,EAAyB,SAACD,GACrC,OAAOR,KAAKK,MAAMT,aAAaU,QAAQ,eACzC,EAEaI,EAAc,WACzBd,aAAae,WAAW,QAC1B,EAEaC,EAAgB,WAC3B,IAAMpB,EAAQI,aAAaU,QAAQ,SACnC,OAAc,OAAVd,QAA4BqB,IAAVrB,CAIxB,EAEaE,EAAS,WAKpB,OAJAE,aAAae,WAAW,SACxBf,aAAae,WAAW,aACxBf,aAAae,WAAW,iBAEjB,CACT,EAGaG,EAAc,iDAAG,WAAOtB,GAAK,2FAClCI,aAAaC,QAAQ,cAAeL,GAAO,KAAD,sCACjD,gBAF0B,qC","file":"static/js/Authenticate-store-auth-reducer.6f8b777a.chunk.js","sourcesContent":["import storage from \"redux-persist/lib/storage\"\r\nimport { persistReducer } from \"redux-persist\"\r\nimport * as Actions from \"./constants\"\r\nimport { logout } from \"../../helpers\"\r\n\r\nconst initState = {\r\n  accessToken: null,\r\n  userData: {},\r\n  loading: false,\r\n  loginSuccess: false,\r\n  error: \"\"\r\n}\r\n\r\nconst AuthReducer = (state = initState, action = {}) => {\r\n  switch (action.type) {\r\n    case Actions.CALL_SIGN_IN_METHOD:\r\n      return { ...state, loading: true }\r\n    case Actions.SIGN_IN_SUCCESS:\r\n      const token = action.payload?.token\r\n      if (token) {\r\n        const accessToken = `Bearer ${token}`\r\n        return {\r\n          ...state,\r\n          loading: false,\r\n          error: \"\",\r\n          loginSuccess: true,\r\n          accessToken,\r\n          userData: { ...action.payload }\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        userData: { ...action.payload }\r\n      }\r\n\r\n    case Actions.SIGN_IN_ERROR:\r\n      const { error } = action\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error,\r\n        loginSuccess: false,\r\n        accessToken: null,\r\n        userData: {}\r\n      }\r\n    case Actions.CALL_LOGOUT_METHOD_SUCCESS:\r\n      logout()\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: \"\",\r\n        loginSuccess: false,\r\n        accessToken: null,\r\n        userData: {}\r\n      }\r\n    case Actions.SIGN_IN_RESET:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: \"\"\r\n      }\r\n    case Actions.UPDATE_USER_INFO_AUTH: {\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: \"\",\r\n        userData: {\r\n          ...state.userData,\r\n          ...action.payload\r\n        }\r\n      }\r\n    }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst persistConfig = {\r\n  key: \"Auth\",\r\n  storage,\r\n  blacklist: [\"loading\", \"error\"]\r\n}\r\n\r\nexport default persistReducer(persistConfig, AuthReducer)\r\n","export const setToken = (token) => {\r\n  localStorage.setItem(\"token\", token);\r\n};\r\n\r\nexport const setUserInfo = (user) => {\r\n  localStorage.setItem(\"user_info\", JSON.stringify(user));\r\n};\r\n\r\nexport const setImportStatus = (importStatus) => {\r\n  localStorage.setItem(\"import_status\", importStatus);\r\n};\r\n\r\nexport const getUserInfo = (user) => {\r\n  return JSON.parse(localStorage.getItem(\"user_info\"));\r\n};\r\n\r\nexport const setPermissionsUserInfo = (permissions) => {\r\n  localStorage.setItem(\"permissions\", JSON.stringify(permissions));\r\n};\r\n\r\nexport const getPermissionsUserInfo = (permissions) => {\r\n  return JSON.parse(localStorage.getItem(\"permissions\"));\r\n};\r\n\r\nexport const removeToken = () => {\r\n  localStorage.removeItem(\"token\");\r\n};\r\n\r\nexport const checkLoggedIn = () => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (token !== null && token !== undefined) {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const logout = () => {\r\n  localStorage.removeItem(\"token\");\r\n  localStorage.removeItem(\"user_info\");\r\n  localStorage.removeItem(\"persist:root\");\r\n  // window.location.href = \"/\"\r\n  return true;\r\n};\r\n\r\n// New\r\nexport const setAccessToken = async (token) => {\r\n  await localStorage.setItem(\"accessToken\", token);\r\n};\r\n"],"sourceRoot":""}